---
title: "Sketch Mode"
description: "Draw constrained 2D profiles for extrude, revolve, sweep, and loft"
order: 6
---

Sketch mode lets you draw 2D profiles that drive 3D operations like extrude, revolve, sweep, and loft. Sketches combine drawing tools with a constraint solver to create precise, parametric geometry.

## When to Use Sketches

Use sketch mode when you need:

- **Custom profiles** for extrusion (shapes beyond basic primitives)
- **Revolution profiles** for turned parts (lathe-style)
- **Sweep cross-sections** for parts that follow a path
- **Loft sections** for blended shapes between profiles

For simple shapes, primitives and boolean operations may be faster. Sketches shine when you need precise control over profile geometry with dimensional and geometric constraints.

## Entering Sketch Mode

Start a sketch in one of three ways:

| Method | Description |
|--------|-------------|
| **Standard plane** | Click XY, XZ, or YZ plane gizmo in the viewport |
| **Face selection** | Click any planar face on existing geometry |
| **Custom plane** | Define by origin point and normal vector |

When you enter sketch mode, the camera automatically swings to face the sketch plane for intuitive 2D drawing.

## Drawing Tools

### Line

Draw connected line segments.

| Action | Result |
|--------|--------|
| Click | Place point |
| Click again | Draw line to new point, continue chain |
| Double-click | Finish line chain |
| Enter | Finish line chain |

```
Shortcut: L
```

### Rectangle

Draw axis-aligned rectangles.

| Action | Result |
|--------|--------|
| Click | Set first corner |
| Drag | Preview rectangle |
| Release | Set opposite corner |

```
Shortcut: R
```

### Circle

Draw circles from center point.

| Action | Result |
|--------|--------|
| Click | Set center point |
| Drag | Set radius |
| Release | Complete circle |

```
Shortcut: C
```

### Arc

Draw circular arcs using three points.

| Action | Result |
|--------|--------|
| Click | Set arc start point |
| Click | Set arc end point |
| Click | Set point on arc (defines curvature) |

## Sketch Planes

### Standard Planes

| Plane | Normal | Use Case |
|-------|--------|----------|
| XY | +Z | Top/bottom features, floor plans |
| XZ | +Y | Front/back features, elevations |
| YZ | +X | Side features, profiles |

Standard planes pass through the origin.

### Face Selection

Click any planar face on existing geometry to sketch on that face. The sketch plane inherits the face's position and orientation. This is useful for:

- Adding features to existing parts
- Cutting pockets aligned to faces
- Building off angled surfaces

### Custom Planes

Define a plane by specifying:

- **Origin**: Point where the plane passes through
- **Normal**: Direction the plane faces

```typescript
// Custom plane example
const plane = {
  origin: { x: 0, y: 0, z: 50 },
  normal: { x: 0, y: 0, z: 1 }
};
```

## Constraints

Constraints lock geometric relationships in your sketch. The solver automatically adjusts geometry to satisfy all constraints.

### Geometric Constraints

These enforce relationships without explicit dimensions:

| Constraint | Selection | Description |
|------------|-----------|-------------|
| Horizontal | 1 line | Line parallel to X axis |
| Vertical | 1 line | Line parallel to Y axis |
| Coincident | 2 points | Points at same location |
| Parallel | 2 lines | Lines in same direction |
| Perpendicular | 2 lines | Lines at 90 degrees |
| Tangent | 1 line + 1 curve | Line tangent to arc/circle |
| Equal Length | 2 lines | Lines have same length |

```
Shortcuts: H (horizontal), V (vertical)
```

### Dimensional Constraints

These set explicit numeric values:

| Constraint | Selection | Description |
|------------|-----------|-------------|
| Distance | 2 points | Distance between points |
| Length | 1 line | Line segment length |
| Radius | 1 circle/arc | Circle or arc radius |
| Angle | 2 lines | Angle between lines |
| Fixed | 1 point | Lock point at coordinates |

### Applying Constraints

1. Select the required entities (points, lines, curves)
2. Click the constraint button in the toolbar
3. For dimensional constraints, enter the value when prompted
4. The solver runs automatically

<Callout type="tip">
Apply geometric constraints (horizontal, vertical, coincident) first, then add dimensional constraints. This order typically produces better results.
</Callout>

## Constraint Status

The UI displays your sketch's constraint health:

| Status | Color | Meaning |
|--------|-------|---------|
| Under-constrained | Yellow | Geometry can still move freely |
| Fully constrained | Green | All degrees of freedom locked |
| Over-constrained | Red | Conflicting constraints |

<Callout type="warning">
Over-constrained sketches cannot be solved. Remove conflicting constraints until the status turns green or yellow.
</Callout>

### Degrees of Freedom

Each sketch element has degrees of freedom (DOF):

| Element | DOF | Description |
|---------|-----|-------------|
| Point | 2 | X and Y position |
| Line | 4 | Two endpoints (2 DOF each) |
| Circle | 3 | Center position + radius |
| Arc | 5 | Center + radius + start/end angles |

Constraints remove degrees of freedom. A fully constrained sketch has 0 remaining DOF.

## Keyboard Shortcuts

| Key | Action |
|-----|--------|
| L | Line tool |
| R | Rectangle tool |
| C | Circle tool |
| H | Horizontal constraint |
| V | Vertical constraint |
| Escape | Exit sketch mode |
| Enter | Finish current shape |

## Workflow Example

Creating an extruded bracket:

```typescript
// 1. Enter sketch mode on XY plane

// 2. Draw L-shaped profile
//    - Draw horizontal line (40mm)
//    - Draw vertical line (30mm)
//    - Draw horizontal line (20mm)
//    - Draw vertical line (10mm)
//    - Close profile

// 3. Apply constraints
//    - Horizontal constraint on horizontal lines
//    - Vertical constraint on vertical lines
//    - Length constraints: 40mm, 30mm, 20mm, 10mm
//    - Fix bottom-left point at origin

// 4. Exit sketch mode (Escape or checkmark)

// 5. Select sketch and apply Extrude operation
//    - Set depth to 5mm
```

## Sketch in IR Format

Sketches are stored in the document as profile data:

```typescript
interface SketchProfile {
  plane: "XY" | "XZ" | "YZ" | CustomPlane;
  origin: Vec3;
  segments: SketchSegment2D[];
  constraints: SketchConstraint[];
}

interface SketchSegment2D {
  type: "line" | "arc" | "circle";
  // Segment-specific properties
}
```

## Using Sketches with Operations

Once your sketch is complete, use it with 3D operations:

| Operation | Description |
|-----------|-------------|
| **Extrude** | Push profile along normal to create solid |
| **Revolve** | Spin profile around axis |
| **Sweep** | Move profile along a path curve |
| **Loft** | Blend between multiple profiles |

```typescript
// Extrude example
{
  type: "extrude",
  profile: sketchId,
  depth: 10.0,
  direction: "normal"  // or specify vector
}
```

## Tips

- **Close your profiles**: Extrude and revolve require closed profiles. Ensure the last point connects to the first.
- **Avoid self-intersection**: Profiles should not cross themselves.
- **Use construction geometry**: Draw reference lines that help with alignment but are not included in the final profile (coming soon).
- **Start simple**: Begin with basic shapes and add complexity gradually.

## Troubleshooting

### Sketch Won't Solve

- Check for over-constrained (red) status
- Look for conflicting constraints (e.g., horizontal + angled on same line)
- Try removing recent constraints one by one

### Geometry Jumps Unexpectedly

- Under-constrained sketches have free DOF
- Add more constraints to lock geometry in place
- Use Fixed constraint to anchor key points

### Extrude Fails

- Verify profile is fully closed
- Check for self-intersecting segments
- Ensure profile lies on a single plane
